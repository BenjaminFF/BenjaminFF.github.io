---
title: 第四章(1)
description: 'ECMA-262描述了一组用于操作数据值的操作符，包括算术运算符(如加号和减号)、位运算符、关系运算符和相等运算符。一元加操作符以一个加号(+)表示，放在数值面前，对数值不会产生任何影响，但在对非数值应用一元加操作符时，......'
tags: ["JS高级程序设计"]
categories: ["JS高级程序设计"]
date: '2019-11-25'
---

### 基本类型和引用类型的值
基本类型包含：Undefined、Null、Boolean、Number和String。引用类型的值是保存在内存中的对象。JavaScript不允许直接访问内存中的位置，也就是说不能直接操作对象的内存空间。

#### 动态的属性
对于引用类型的值，可以为其添加属性和方法，也可以改变和删除其属性和方法。而基本类型则不行。例如：
```javascript
var person = new Object();
person.name = 'Nicholas';
console.log(person.name);  // Nicholas

var name = 'Nicholas';
name.age = 25;
console.log(name.age);   //undefined
```

#### 复制变量值
复制基本类型的值会在变量对象上创建一个新值，然后把该值复制到为新变量分配的位置上。复制引用类型的值同样也会将存储在变量对象中的值复制一份放到为新变量分配的空间中。不同的是，这个值的副本实际上是个指针，而这个指针指向存储在堆中的一个对象。

#### 传递参数
在向参数传递基本类型的值时，被传递的值会被复制给一个局部变量(即命名参数，或者用ECMAScript的概念来说，就是arguments对象中的一个元素)。在向参数传递引用类型的值时，会把这个值在内存中的地址复制给一个局部变量，因此这个局部变量的变化会反映在函数的外部。

#### 检测类型
检测基本类型用typeof，检测引用类型是哪个对象用instanceof。

#### 执行环境和作用域
执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个与之相关的**变量对象**(veriable object)，环境中定义的所用变量和函数都保存在这个对象中。虽然我们编写的代码无法访问这个对象，但解析器在处理数据时会在后台使用它。

全局执行环境是最外围的执行环境，根据ECMAScript实现所在的宿主环境不同，表示执行环境的对象也不一样。在Web浏览器中，全局执行环境被认为是window对象，因此所有全局变量和函数都是作为window对象的属性和方法创建的。某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁（全局执行环境直到应用程序退出--例如关闭网页或浏览器--时才会被销毁）。

当代码在一个环境中执行时，会创建变量对象的一个**作用域链**(scope chain)。作用域链的用途，是保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端，始终都是当前执行的代码所在环境的变量对象。如果这个环境是函数，则将其**活动对象**(activation object)作为变量对象。活动对象在最开始时只包含一个变量，即arguments对象(这个对象在全局环境中不存在)。作用域链中的下一个变量对象来自包含（外部）环境，而再下一个变量对象则来自下一个包含环境。这样，一直延续到全局执行环境；全局执行环境的变量对象始终都是作用域链中的最后一个对象。

标志符解析是沿着作用域链一级一级地搜索标志符的过程。搜索过程始终从作用域链的前端开始，然后逐渐地向后回溯，直到找到标志符为主（如果找不到标志符，通常会导致错误发生）。  
